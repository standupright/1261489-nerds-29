var messageLink=document.querySelector(".button-map-description"),popup=document.querySelector(".popup"),popupClose=document.querySelector(".popup-close"),popupForm=document.querySelector(".popup-form"),popupName=document.querySelector(".form-name"),popupEmail=document.querySelector(".form-email"),popupMessage=document.querySelector(".form-message"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}messageLink.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),storageName?(popupName.value=storageName,popupEmail.focus()):popupName.focus(),storageEmail?(popupEmail.value=storageEmail,popupMessage.focus()):popupName.focus()}),popupClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error")}),popupForm.addEventListener("submit",function(e){popupName.value&&popupEmail.value&&popupMessage.value?isStorageSupport&&(localStorage.setItem("name",popupName.value),localStorage.setItem("email",poupEmail.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-show")&&(e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error"))});